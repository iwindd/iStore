model User {
  id             Int           @id @default(autoincrement())
  first_name     String
  last_name      String
  email          String        @unique
  password       String
  created_at     DateTime      @default(now())
  updated_at     DateTime      @updatedAt
  employees      Employee[]
  addresses      UserAddress[]
  global_role_id Int?
  global_role    GlobalRole?   @relation(fields: [global_role_id], references: [id])

  @@map("users")
}

model Employee {
  id         Int      @id @default(autoincrement())
  user_id    Int
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt
  role_id    Int
  store_id   String
  creator_id Int?

  user                   User            @relation(fields: [user_id], references: [id])
  role                   StoreRole       @relation("EmployeeRole", fields: [role_id], references: [id])
  categories             Category[]
  products               Product[]
  orders                 Order[]
  returned_preorders     OrderPreOrder[] @relation("ReturnedPreOrders")
  cancelled_preorders    OrderPreOrder[] @relation("CancelledPreOrders")
  stock_receipts         StockReceipt[]
  role_creations         StoreRole[]     @relation("StoreRoleCreations")
  global_role_creations  GlobalRole[]    @relation("GlobalRoleCreations")
  store                  Store           @relation(fields: [store_id], references: [id])
  creator                Employee?       @relation("EmployeeToEmployee", fields: [creator_id], references: [id])
  employees              Employee[]      @relation("EmployeeToEmployee")
  events                 Event[]
  broadcasts             Broadcast[]
  consignments           Consignment[]
  completed_consignments Consignment[]   @relation("CompletedConsignments")
  cancelled_consignments Consignment[]   @relation("CancelledConsignments")

  @@unique([user_id, store_id])
  @@map("employees")
}
