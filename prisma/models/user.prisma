model User {
  id         Int         @id @default(autoincrement())
  name       String
  email      String      @unique
  password   String
  created_at DateTime    @default(now())
  updated_at DateTime    @updatedAt
  employees Employee[]

  @@map("users")
}

model Employee {
  id         Int      @id @default(autoincrement())
  user_id    Int
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt
  role_id    Int
  store_id   String
  creator_id Int?

  user           User           @relation(fields: [user_id], references: [id])
  role           Role           @relation("EmployeeRole", fields: [role_id], references: [id])
  categories     Category[]
  products       Product[]
  orders              Order[]
  returned_preorders  OrderPreOrder[] @relation("ReturnedPreOrders")
  cancelled_preorders OrderPreOrder[] @relation("CancelledPreOrders")
  borrows             Borrow[]
  stock_receipts StockReceipt[]
  roles          Role[]
  store          Store          @relation(fields: [store_id], references: [id])
  creator        Employee?      @relation("EmployeeToEmployee", fields: [creator_id], references: [id])
  employees      Employee[]     @relation("EmployeeToEmployee")
  events         Event[]
  broadcasts     Broadcast[]

  @@unique([user_id, store_id])
  @@map("employees")
}
