model Order {
  id         Int       @id @default(autoincrement())
  price      Int
  cost       Int
  profit     Int
  method     Method    @default(CASH)
  type       OrderType @default(CASHOUT)
  note       String
  text       String    @db.Text
  created_at DateTime  @default(now())
  updated_at DateTime  @updatedAt

  store_id      String
  store         Store          @relation(fields: [store_id], references: [id])
  user_store_id Int?
  user_store    UserStore?     @relation(fields: [user_store_id], references: [id])
  products      OrderProduct[]

  @@map("orders")
}

model OrderProduct {
  id            Int        @id @default(autoincrement())
  serial        String
  label         String
  category      String
  price         Int
  cost          Int
  count         Int
  overstock     Int        @default(0)
  overstock_at  DateTime?
  user_store_id Int? // ผู้ทำรายการ สำเร็จ การเบิก
  user_store    UserStore? @relation(fields: [user_store_id], references: [id])
  order_id      Int
  order         Order      @relation(fields: [order_id], references: [id])

  @@map("order_products")
}

enum Method {
  CASH
  BANK
}

enum OrderType {
  CASHOUT
  PURCHASE
  BORROW
}
