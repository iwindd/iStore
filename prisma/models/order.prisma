model Order {
  id         Int             @id @default(autoincrement())
  price      Int
  cost       Int
  profit     Int
  method     Method          @default(CASH)
  type       OrderType       @default(CASHOUT)
  note       String
  text       String          @db.Text
  store_id   String
  creator_id Int?
  created_at DateTime        @default(now())
  updated_at DateTime        @updatedAt

  store      Store          @relation(fields: [store_id], references: [id])
  creator    Employee?      @relation(fields: [creator_id], references: [id])
  products   OrderProduct[]

  @@map("orders")
}

model OrderProduct {
  id              Int               @id @default(autoincrement())
  serial          String
  label           String
  category        String
  price           Int
  cost            Int
  count           Int
  overstock       Int               @default(0)
  order_id        Int
  overstock_at    DateTime?
  creator_id      Int?

  creator         Employee?       @relation(fields: [creator_id], references: [id])
  order           Order            @relation(fields: [order_id], references: [id])
  promotionOffers PromotionOffer[]

  @@map("order_products")
}

enum Method {
  CASH
  BANK
}

enum OrderType {
  CASHOUT
  PURCHASE
  BORROW
}

enum OrderProductType {
  NORMAL
  OFFER
}