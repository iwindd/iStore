model Order {
  id         Int             @id @default(autoincrement())
  cost       Decimal
  profit     Decimal
  total      Decimal
  method     Method          @default(CASH)
  type       OrderType       @default(CASHOUT)
  note       String?
  store_id   String
  creator_id Int?
  created_at DateTime        @default(now())
  updated_at DateTime        @updatedAt

  store      Store          @relation(fields: [store_id], references: [id])
  creator    Employee?      @relation(fields: [creator_id], references: [id])
  products   OrderProduct[]
  productStockMovements  ProductStockMovement[]

  @@map("orders")
}

model OrderProduct {
  id              Int               @id @default(autoincrement())
  order_id        Int
  product_id      Int
  note            String?
  count           Int
  total           Decimal
  profit          Decimal
  cost            Decimal

  product         Product         @relation(fields: [product_id], references: [id])
  order           Order            @relation(fields: [order_id], references: [id])
  promotionOffers PromotionOffer[]

  @@map("order_products")
}

enum Method {
  CASH
  BANK
}

enum OrderType {
  CASHOUT
  PURCHASE
  BORROW
}

enum OrderProductType {
  NORMAL
  OFFER
}