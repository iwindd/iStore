model GlobalRole {
  id             Int      @id @default(autoincrement())
  label          String   @db.VarChar(100)
  created_at     DateTime @default(now())
  updated_at     DateTime @updatedAt
  is_removable   Boolean  @default(false)
  creator_id     Int?

  creator     Employee?          @relation("GlobalRoleCreations", fields: [creator_id], references: [id])
  users       User[]
  permissions GlobalPermission[] @relation("GlobalRolePermission")

  @@index([creator_id])
  @@unique([label])
  @@map("global_roles")
}

model GlobalPermission {
  id   Int    @id @default(autoincrement())
  name String @db.VarChar(255)

  roles GlobalRole[] @relation("GlobalRolePermission")

  @@unique([name])
  @@map("global_permissions")
}

model StoreRole {
  id           Int      @id @default(autoincrement())
  name         String   @db.VarChar(100)
  description  String?  @db.VarChar(255)
  created_at   DateTime @default(now())
  updated_at   DateTime @updatedAt
  store_id     String
  is_removable Boolean  @default(false)
  creator_id   Int?

  store       Store             @relation(fields: [store_id], references: [id])
  creator     Employee?         @relation("StoreRoleCreations", fields: [creator_id], references: [id])
  employees   Employee[]        @relation("EmployeeRole")
  permissions StorePermission[] @relation("StoreRolePermission")

  @@index([store_id])
  @@index([creator_id])
  @@unique([store_id, name])
  @@map("store_roles")
}

model StorePermission {
  id   Int    @id @default(autoincrement())
  name String @db.VarChar(255)

  roles StoreRole[] @relation("StoreRolePermission")

  @@unique([name])
  @@map("store_permissions")
}
