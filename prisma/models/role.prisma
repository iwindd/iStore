model GlobalRole {
  id             Int      @id @default(autoincrement())
  label          String
  created_at     DateTime @default(now())
  updated_at     DateTime @updatedAt
  is_removable   Boolean  @default(false)
  creator_id     Int?

  creator     Employee?          @relation("GlobalRoleCreations", fields: [creator_id], references: [id])
  users       User[]
  permissions GlobalPermission[] @relation("GlobalRolePermission")

  @@unique([label])
  @@map("global_roles")
}

model GlobalPermission {
  id   Int    @id @default(autoincrement())
  name String

  roles GlobalRole[] @relation("GlobalRolePermission")

  @@unique([name])
  @@map("global_permissions")
}

model StoreRole {
  id         Int      @id @default(autoincrement())
  name       String
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt
  store_id   String
  is_removable Boolean  @default(false)
  creator_id Int?

  store       Store             @relation(fields: [store_id], references: [id])
  creator     Employee?         @relation("StoreRoleCreations", fields: [creator_id], references: [id])
  employees   Employee[]        @relation("EmployeeRole")
  permissions StorePermission[] @relation("StoreRolePermission")

  @@unique([store_id, name])
  @@map("store_roles")
}

model StorePermission {
  id   Int    @id @default(autoincrement())
  name String

  roles StoreRole[] @relation("StoreRolePermission")

  @@unique([name])
  @@map("store_permissions")
}
